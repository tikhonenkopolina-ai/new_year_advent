# Telegram Advent Bot –¥–ª—è –ª—é–±–∏–º–æ–≥–æ üíå

–ù–µ–±–æ–ª—å—à–æ–π Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤ –ø–µ—Ä–∏–æ–¥ –∞–¥–≤–µ–Ω—Ç–∞ (—Å 24 –¥–µ–∫–∞–±—Ä—è –ø–æ 11 —è–Ω–≤–∞—Ä—è)
–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤—ã–¥–∞—ë—Ç –æ–¥–Ω–æ –ø–æ—Å–ª–∞–Ω–∏–µ: —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ.  
–í—Å–µ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ ¬´–ø–æ–¥–∞—Ä–∫–∏¬ª –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ª–µ–Ω—Ç–µ —á–∞—Ç–∞ –∏ –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å.

## –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –∫ –±–æ—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`.
- –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –∏ –∫–Ω–æ–ø–∫–æ–π:\
  **¬´üéÅ –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è¬ª**.
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –±–æ—Ç:
  1. –°–º–æ—Ç—Ä–∏—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –≤ –∑–∞–¥–∞–Ω–Ω–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ.
  2. –ï—Å–ª–∏ –¥–∞—Ç–∞ **—Ä–∞–Ω—å—à–µ** –Ω–∞—á–∞–ª–∞ –∞–¥–≤–µ–Ω—Ç–∞ ‚Äî –ø–∏—à–µ—Ç, —á—Ç–æ –µ—â—ë —Ä–∞–Ω–æ.
  3. –ï—Å–ª–∏ –¥–∞—Ç–∞ **–≤ –ø–µ—Ä–∏–æ–¥–µ** –∞–¥–≤–µ–Ω—Ç–∞ ‚Äî –±–µ—Ä—ë—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–µ–Ω—å –∏–∑ `ADVENT_DAYS`
     –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ.
  4. –ï—Å–ª–∏ –¥–∞—Ç–∞ **–ø–æ—Å–ª–µ** –∫–æ–Ω—Ü–∞ –∞–¥–≤–µ–Ω—Ç–∞ ‚Äî –ø–∏—à–µ—Ç, —á—Ç–æ –∞–¥–≤–µ–Ω—Ç –∑–∞–≤–µ—Ä—à—ë–Ω, –Ω–æ –≤—Å–µ
     –ø–æ–¥–∞—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —á–∞—Ç–µ.
- –ö–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.

–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–∑–µ** ‚Äî –≤—Å—ë –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –¥–∞—Ç–µ.
–≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –¥–µ–ø–ª–æ–π –∏ –¥–µ–ª–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º (–≤ —Ä–∞–º–∫–∞—Ö free-–ø–ª–∞–Ω–∞ Render).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ main.py            # –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ + –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (aiohttp) —Å –≤–µ–±—Ö—É–∫–æ–º
‚îú‚îÄ advent_content.py  # –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –∞–¥–≤–µ–Ω—Ç–∞ (—Ç–µ–∫—Å—Ç—ã + —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–µ–¥–∏–∞ –ø–æ –¥–Ω—è–º)
‚îú‚îÄ requirements.txt   # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ render.yaml        # Blueprint-–∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Render.com
```

## –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

1. –°–æ–∑–¥–∞–π –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\Scripts\activate
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   pip install -r requirements.txt
   ```

3. –ó–∞–¥–∞–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

   ```bash
   export TELEGRAM_TOKEN="–¢–û–ö–ï–ù_–¢–í–û–ï–ì–û_–ë–û–¢–ê"
   export WEBHOOK_URL="https://—Ç–≤–æ–π-–¥–æ–º–µ–Ω/webhook"
   export TZ_NAME="Europe/Amsterdam"
   # WEBHOOK_SECRET –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø–æ –∂–µ–ª–∞–Ω–∏—é:
   export WEBHOOK_SECRET="–∫–∞–∫–∞—è-–Ω–∏–±—É–¥—å_—Å–µ–∫—Ä–µ—Ç–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞"
   ```

4. –ó–∞–ø—É—Å—Ç–∏:

   ```bash
   python main.py
   ```

5. –£–±–µ–¥–∏—Å—å, —á—Ç–æ Telegram –≤–∏–¥–∏—Ç —Ç–≤–æ–π –≤–µ–±—Ö—É–∫:
   - –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–æ–¥ —Å–∞–º –≤—ã–∑–æ–≤–µ—Ç `setWebhook` –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π `WEBHOOK_URL`.

> –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ–±–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç—É–Ω–Ω–µ–ª—å (ngrok, Cloudflared –∏ —Ç.–ø.),  
> —á—Ç–æ–±—ã —É Telegram –±—ã–ª –¥–æ—Å—Ç—É–ø –∫ `WEBHOOK_URL`.

## –î–µ–ø–ª–æ–π –Ω–∞ Render.com (free –ø–ª–∞–Ω)

1. –ó–∞–ª–µ–π —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub.
2. –í Render —Å–æ–∑–¥–∞–π **Blueprint**-—Å–µ—Ä–≤–∏—Å, —É–∫–∞–∑–∞–≤ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
3. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç `render.yaml`:
   - `buildCommand: pip install -r requirements.txt`
   - `startCommand: python main.py`
4. –í —Ä–∞–∑–¥–µ–ª–µ **Environment** –∑–∞–¥–∞–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   - `TELEGRAM_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏–∑ BotFather.
   - `WEBHOOK_URL` ‚Äî –ø–æ–ª–Ω—ã–π URL –¥–æ `/webhook` —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞,
     –Ω–∞–ø—Ä–∏–º–µ—Ä: `https://telegram-advent-bot.onrender.com/webhook`
   - `WEBHOOK_SECRET` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–¥–æ–ª–∂–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–º,
     —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ, –µ—Å–ª–∏ —Ç—ã –µ—ë –∑–∞–¥–∞—ë—à—å).
   - `TZ_NAME` ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∂–µ `Europe/Amsterdam`.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è Render –≤—ã–¥–∞—Å—Ç –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–∏—Å–∞ ‚Äî –¥–æ–±–∞–≤—å –∫ –Ω–µ–º—É `/webhook`
–∏ –∏–º–µ–Ω–Ω–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ `WEBHOOK_URL`.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞

–í—Å–µ —Ç–µ–∫—Å—Ç—ã –∏ –º–µ–¥–∏–∞ –∂–∏–≤—É—Ç –≤ `advent_content.py` –≤ —Å–ø–∏—Å–∫–µ `ADVENT_DAYS`.

–ß—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ:

1. –í–æ–∑—å–º–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –∏ **–≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤—å** –µ–º—É –Ω—É–∂–Ω—ã–µ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ.
2. –ü–æ—Å–º–æ—Ç—Ä–∏ `file_id` —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤:
   - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `update`
     –∏ –≤—ã–≤–µ—Å—Ç–∏ `update.message.photo` / `update.message.video`.
3. –°–∫–æ–ø–∏—Ä—É–π `file_id` –∏ –≤—Å—Ç–∞–≤—å –µ–≥–æ –≤–º–µ—Å—Ç–æ –∑–∞–≥–ª—É—à–µ–∫ –≤–∏–¥–∞
   `"<–í–°–¢–ê–í–¨_–°–Æ–î–ê_file_id_–§–û–¢–û_–û–ë–™–Ø–¢–ò–Ø>"` –≤ `advent_content.py`.
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∏–ª–∏ –∑–∞–¥–µ–ø–ª–æ–π –∑–∞–Ω–æ–≤–æ).

–ï—Å–ª–∏ `file_id` –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –¥–ª—è —ç—Ç–æ–≥–æ –¥–Ω—è.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏–∫–∞ –ø–æ –¥–∞—Ç–∞–º

- –î–∞—Ç—ã –∞–¥–≤–µ–Ω—Ç–∞ –∑–∞–¥–∞—é—Ç—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏:

  ```python
  ADVENT_START = date(2024, 12, 24)
  ADVENT_END = date(2025, 1, 11)
  ```

- –í `main.py` —Ñ—É–Ω–∫—Ü–∏—è `get_today_index()`:
  - –±–µ—Ä—ë—Ç —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –≤ –∑–∞–¥–∞–Ω–Ω–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ;
  - –µ—Å–ª–∏ –æ–Ω–∞ –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`;
  - –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ ‚Äî —Å—á–∏—Ç–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –≤ –¥–Ω—è—Ö –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë –∫–∞–∫ –∏–Ω–¥–µ–∫—Å –≤ `ADVENT_DAYS`.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:
- 24 –¥–µ–∫–∞–±—Ä—è = –∏–Ω–¥–µ–∫—Å `0`,
- 25 –¥–µ–∫–∞–±—Ä—è = –∏–Ω–¥–µ–∫—Å `1`,
- –∏ —Ç.–¥.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–µ–Ω—å–≥–∏

- –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.
- –ù–µ—Ç –ø–ª–∞—Ç–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.
- –í—Å—ë –∫—Ä—É—Ç–∏—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ Python –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –≤–µ–±-—Å–µ—Ä–≤–∏—Å–µ Render.
- –û–ø–ª–∞—Ç–∞ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ, –µ—Å–ª–∏ —Ç—ã –ø—Ä–µ–≤—ã—Å–∏—à—å –ª–∏–º–∏—Ç—ã free-–ø–ª–∞–Ω–∞ Render (–ø–æ –≤—Ä–µ–º–µ–Ω–∏/—Ä–µ—Å—É—Ä—Å–∞–º),
  –Ω–æ —Å–∞–º –∫–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏—á–µ–≥–æ –ø–ª–∞—Ç–Ω–æ–≥–æ.

## –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—Ç—Å—è —É—Å–ª–æ–∂–Ω–∏—Ç—å:

- –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –∏–∑ –º–µ–Ω—é ¬´–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–∞–Ω–∏–µ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø—Ä–æ—à–µ–¥—à–∏–π –¥–µ–Ω—å¬ª;
- —Å–¥–µ–ª–∞—Ç—å –ø–∞—Å—Ö–∞–ª–∫–∏ –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏;
- –≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–Ω –Ω–∞–∂–∏–º–∞–ª, –∫–∞–∫–∏–µ –¥–Ω–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç –∏ —Ç.–¥.) —á–µ—Ä–µ–∑ –ë–î.

–ù–æ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –∞–¥–≤–µ–Ω—Ç–∞ —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–∏ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üíñ
